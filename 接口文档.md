接口定义：

# 后台接口设计文档
## 注册接口
 - URL:api.i-vectors.com:10666/register
 - 参数：
 
         var settings = {
              "async": true,
              "crossDomain": true,
              "url": "http://api.i-vectors.com:10666/register",
              "method": "POST",
              "headers": {
                "x-requested-with": "XMLHttpRequest",
                "cache-control": "no-cache",
                "postman-token": "ddcffb8d-b1ca-f3a0-bd23-ea4980945f5c",
                "content-type": "application/x-www-form-urlencoded"
              },
              "data": {
                "phone_email": "1@163.com",
                "password": "password",
                "password_confirmation": "password",
                "usertype": "B"
              }
            }
        
        $.ajax(settings).done(function (response) {
          console.log(response);
        });
     
 
 ```
 phone_email:电话或者邮箱，后台自动识别;
 usertype:[B,N]
 B:为商家
 N:为普通用户，不填为N
 ```
 
 - 失败返回
 
 
        {
          "status": 1001,
          "message": "The phone must be at least 7 characters."
        }
  
  
  - 成功返回
  
        {
           "status": 200,
           "message": "注册完成可以使用你的号码登陆了"
         }
        
        {
           "status": 200,
           "message": "Registration complete.  Please check your email for activation instructions."
         }
 

## 密码重置接口
 - URL:api.i-vectors.com:10666/password/reset  
 - URL2:api.i-vectors.com:10666/resend 重发确认邮件
 - 参数：
 
         var settings = {
           "async": true,
           "crossDomain": true,
           "url": "http://api.i-vectors.com:10666/password/reset",
           "method": "POST",
           "headers": {
             "x-requested-with": "XMLHttpRequest",
             "cache-control": "no-cache",
             "postman-token": "b778cba0-493a-717d-fc63-702f81531318",
             "content-type": "application/x-www-form-urlencoded"
           },
           "data": {
             "email": "18612116114@163.com"
           }
         }
         
         $.ajax(settings).done(function (response) {
           console.log(response);
         });
 
 - 目前支持邮箱注册重置，电话注册重置未实现（短信验证。。。）
    
##  登录
  -URL:api.i-vectors.com:10666/api/user/login
  -参数：
  
      var settings = {
        "async": true,
        "crossDomain": true,
        "url": "http://api.i-vectors.com:10666/api/user/login",
        "method": "POST",
        "headers": {
          "cache-control": "no-cache",
          "postman-token": "279bf685-3cbb-d690-16c5-a8fc38317540",
          "content-type": "application/x-www-form-urlencoded"
        },
        "data": {
          "grant_type": "password",固定但必须带
          "username": "admin@admin.com",用户名称或者邮件电话号码
          "password": "password",密码
          "client_id": "Qylin",固定
          "client_secret": "Qylin",固定
          "": ""
        }
      }
      
      $.ajax(settings).done(function (response) {
        console.log(response);
      });
  
  
  - 返回
     成功：
     
            {
              "status": 200,
              "tokeno": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjEsImlzcyI6Imh0dHA6XC9cL2FwaS5pLXZlY3RvcnMuY29tOjEwNjY2XC9hcGlcL3VzZXJcL2FjY2Vzc190b2tlbiIsImlhdCI6MTQ1ODMxNDAxMywiZXhwIjoxNDU4MzE3NjEzLCJuYmYiOjE0NTgzMTQwMTMsImp0aSI6IjgyMjAzZjNjZjg3ZDMzM2Q2MDlmNTczNWM3NmY2NzgzIn0.wN_pwvciLhPq6d0NxecoD9uyYoyKGhDAYZ5waXbuPvI",
              "token": 
                {
                    "access_token": "GBz5nTx6LihTCQX7E7S6YlZ5PwUazxir5QFuEsyE",
                    "token_type": "Bearer",
                    "expires_in": 3600,
                    "refresh_token": "WYiVzcg4DPcKeO3HAGKtOkZR6AZWrkEQgy2UOrDS"
                   }
           }
                 
      失败：
      
            {
            "status": 1001,
            "error": "认证失败"
            }
    
    新的token机制采用了双重token机制，在修改时必须提供两种token，一般的访问操作之需要携带access_token
    token都放在Header中，这块和之前的完全不同

	- Header:
       - OAuthorization: Bearer tokeno
       - Authorization: Bearer access_token
       
            OAuthorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjEsImlzcyI6Imh0dHA6XC9cL2FwaS5pLXZlY3RvcnMuY29tOjEwNjY2XC9hcGlcL3VzZXJcL2FjY2Vzc190b2tlbiIsImlhdCI6MTQ1ODE4MzYzNiwiZXhwIjoxNDU4MTg3MjM2LCJuYmYiOjE0NTgxODM2MzYsImp0aSI6IjNmZWNkOTE1MTU4ZjIzOWNjNzhjNzIwMjVmMzcwMzgwIn0.C0sYVW2bCfz4ZJkNjpPkXfSUb_Plr5KoezrrDmvl8QY
            Authorization: Bearer cGJzubBWo0YP9Qqm8m5GMOTNXmnUcAgkdntP4NrK

### 令牌更新
    
    var form = new FormData();
    form.append("grant_type", "refresh_token");
    form.append("client_id", "Qylin");
    form.append("client_secret", "Qylin");
    form.append("refresh_token", "t3UmoaP0CBMkArmkWJzFkSp2MdEJ9fshucoNk2za");
    
    var settings = {
      "async": true,
      "crossDomain": true,
      "url": "http://api.i-vectors.com:10666/api/user/refresh_token",
      "method": "POST",
      "headers": {
        "oauthorization": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjEsImlzcyI6Imh0dHA6XC9cL2FwaS5pLXZlY3RvcnMuY29tOjEwNjY2XC9hcGlcL3VzZXJcL2FjY2Vzc190b2tlbiIsImlhdCI6MTQ1ODIyNDE2NCwiZXhwIjoxNDU4MjI3NzY0LCJuYmYiOjE0NTgyMjQxNjQsImp0aSI6IjUwZTZmY2U4NDUyZWQzYzNmMjZiNjExMDRiMzM5OWFlIn0.51oxXwzLi1UDGqaNuYDdQPXfk4u0aNeWht9ujqns7GE",
        "cache-control": "no-cache",
        "postman-token": "c57f19f8-511a-cb63-78e6-eeda26e5b4cf"
      },
      "processData": false,
      "contentType": false,
      "mimeType": "multipart/form-data",
      "data": form
    }
    
    $.ajax(settings).done(function (response) {
      console.log(response);
    });
    
  - 返回
  
            {
              "status": 200,
              "tokeno": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjEsImlzcyI6Imh0dHA6XC9cL2FwaS5pLXZlY3RvcnMuY29tOjEwNjY2XC9hcGlcL3VzZXJcL2FjY2Vzc190b2tlbiIsImlhdCI6MTQ1ODMxNDAxMywiZXhwIjoxNDU4MzE3NjEzLCJuYmYiOjE0NTgzMTQwMTMsImp0aSI6IjgyMjAzZjNjZjg3ZDMzM2Q2MDlmNTczNWM3NmY2NzgzIn0.wN_pwvciLhPq6d0NxecoD9uyYoyKGhDAYZ5waXbuPvI",
              "token": 
                {
                    "access_token": "GBz5nTx6LihTCQX7E7S6YlZ5PwUazxir5QFuEsyE",
                    "token_type": "Bearer",
                    "expires_in": 3600,
                    "refresh_token": "WYiVzcg4DPcKeO3HAGKtOkZR6AZWrkEQgy2UOrDS"
                   }
           }
### 获取自己的信息
   - URL:api.i-vectors.com:10666/api/user/myself
   - 参数
   
            var form = new FormData();
            form.append("grant_type", "refresh_token");
            form.append("client_id", "Qylin");
            form.append("client_secret", "Qylin");
            form.append("refresh_token", "t3UmoaP0CBMkArmkWJzFkSp2MdEJ9fshucoNk2za");
            
            var settings = {
              "async": true,
              "crossDomain": true,
              "url": "http://api.i-vectors.com:10666/api/user/refresh_token",
              "method": "POST",
              "headers": {
                "oauthorization": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjEsImlzcyI6Imh0dHA6XC9cL2FwaS5pLXZlY3RvcnMuY29tOjEwNjY2XC9hcGlcL3VzZXJcL2FjY2Vzc190b2tlbiIsImlhdCI6MTQ1ODIyNDE2NCwiZXhwIjoxNDU4MjI3NzY0LCJuYmYiOjE0NTgyMjQxNjQsImp0aSI6IjUwZTZmY2U4NDUyZWQzYzNmMjZiNjExMDRiMzM5OWFlIn0.51oxXwzLi1UDGqaNuYDdQPXfk4u0aNeWht9ujqns7GE",
                "cache-control": "no-cache",
                "postman-token": "78cc41a6-40cd-176f-1339-c70dffe1df50"
              },
              "processData": false,
              "contentType": false,
              "mimeType": "multipart/form-data",
              "data": form
            }
            
            $.ajax(settings).done(function (response) {
              console.log(response);
            });
    - 返回：
    
            {
              "status": 200,
              "user": {
                "id": 1,
                "name": "admin",
                "phone": "test.png",
                "image": "test.png",
                "email": "admin@admin.com",
                "remember_token": null,
                "permissions": null,
                "last_login": "2016-03-17 14:31:17",
                "created_at": "2016-01-24 02:34:48",
                "updated_at": "2016-03-17 14:31:17",
                "password": ""
                }
            }
### 更新详细信息
   - URL:api.i-vectors.com:10666/api/user/updatadetails
   - 参数：
   
          var settings = {
            "async": true,
            "crossDomain": true,
            "url": "http://api.i-vectors.com:10666/api/user/updatadetails",
            "method": "POST",
            "headers": {
              "oauthorization": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjEsImlzcyI6Imh0dHA6XC9cL2FwaS5pLXZlY3RvcnMuY29tOjEwNjY2XC9hcGlcL3VzZXJcL2FjY2Vzc190b2tlbiIsImlhdCI6MTQ1ODIyNDE2NCwiZXhwIjoxNDU4MjI3NzY0LCJuYmYiOjE0NTgyMjQxNjQsImp0aSI6IjUwZTZmY2U4NDUyZWQzYzNmMjZiNjExMDRiMzM5OWFlIn0.51oxXwzLi1UDGqaNuYDdQPXfk4u0aNeWht9ujqns7GE",
              "authorization": "Bearer TjoAW0GZMLv9YflP6Z22WluJ49BdnXRS3fF6Qci1",
              "cache-control": "no-cache",
              "postman-token": "e5631dd1-12bd-fe50-2cd1-537c719300c9",
              "content-type": "application/x-www-form-urlencoded"
            },
            "data": {
              "address": "beijing"  需要修改的内容
            }
          }
          
          $.ajax(settings).done(function (response) {
            console.log(response);
          }); 
   

   
   
   
## 1. 登录功能

```input

url:/api/user/signin;
sendparam ={
          "mobile_phone":mobole_phone,   //手机号
          "email":email,             //邮箱
          "password":password,    ／／密码
          "platform":"ios"      ／／系统类型：android为“android” ios为“ios”
        }

  resultData={
    succeed:1,  //1表示成功，0表示失败
    uid:uid,   //userid
    sid:sid,   //sessionid
    error_desc  //错误描述
  }
  
  ```
2. 注册功能
url:/api/user/signup;
sendparam ={
            "mobile_phone":mobie_phone,
            "email":email，
            “password”:password
          }
  resultData={
    succeed:1,  //1表示成功，0表示失败
    error_desc  //错误描述
  }
3. 用户个人信息更改
  url:/api/user/userinfo;
sendparam ={
            "uid":uid,
            "sid":sid，
            “username”:username,
            "gender":gender,
            "birthDate":birthDate,
            "passportID":passportID,
            "country":country,
            “bloodtype”:bloodtype,
            "social_insurance":social insurance,//社保号
            “mobile_phone”:mobile_phone,
            "email":email,
            "alergic_history",//过敏史
          }
  resultData={
    succeed:1,  //1表示成功，0表示失败
    error_desc  //错误描述
  }
    
4. 获取用户个人信息数据
  url:/api/user/userdata;
  sendparam ={
            "uid":uid,
            "sid":sid，
            
  }
  resultData＝{
            “username”:username,
            "gender":gender,
            "birthDate":birthDate,
            "passportID":passportID,
            "country":country,
            “bloodtype”:bloodtype,
            "social_insurance":social insurance,//社保号
            “mobile_phone”:mobile_phone,
            "email":email,
            "alergic_history",//过敏史
  ｝
5. 添加或更改银行卡
6. 获取银行卡
7. 删除银行卡
7. 添加或更改紧急联系人
8. 获取紧急联系人
8. 删除紧急联系人
9. 获取某城市商家列表
10.获取某商家详细信息
11.用户发送订单
12.用户支付订单
13.查看历史订单
14.取消订单或删除订单
15.评价服务
15.发送报警信息


